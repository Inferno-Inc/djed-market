'use strict';

var _ = require( 'lodash' );

module.exports = function ( modelName ) {

  var throwError = function ( methodName ) {
    return function () {
      throw new Error( modelName + ' implements the StrictAccess mixin,' +
        ' which disables the ' + methodName + ' method.' );
    };
  };

  return {
    get: throwError( 'get' ),

    // the backbone model constructor calls `set`,
    // so only throw once the model is initialized
    set: function () {
      _.after( 2, throwError( 'set' ) );
    },

    save: throwError( 'save' ),

    destroy: throwError( 'destroy' )
  };
};
