'use strict';

var View = require( 'djed/interface/view/View' );

module.exports = View.extend( {

  events: {
    'click li': 'switchStory'
  },

  initialize: function ( options ) {
    this.listenTo( this.model, 'switch', this.render );
    this.render();
    if ( options.doHide ) {
      this.transitionOut();
    }
  },

  render: function () {
    var $active = this.$( 'li' ).eq( this.model.active );
    $active.addClass( 'active' );
    this.$( 'li' ).not( $active ).removeClass( 'active' );
  },

  transitionIn: function () {
    this.$el.velocity( {
      translateY: 0
    }, {
      duration: 750,
      easing: [ 500, 30 ]
    } );
  },

  transitionOut: function () {
    this.$el.velocity( {
      translateY: this.$el.outerHeight()
    }, {
      duration: 500,
      easing: 'easeOutQuint'
    } );
  },

  switchStory: function ( evt ) {
    this.model.switch( this.$( evt.currentTarget ).attr( 'data-id' ) );
    this.trigger( 'switched' );
  }

} );
