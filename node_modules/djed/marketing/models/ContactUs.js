'use strict';

var _ = require( 'lodash' );
var Model = require( 'djed/interface/model/Model' );
var trim = require( 'underscore.string/trim' );

module.exports = Model.extend( {

  initialize: function ( data, options ) {
    this.baseUrl = options.baseUrl;
  },

  url: function () {
    return this.baseUrl + '/contact-us/';
  },

  validate: function () {
    var errors = {};
    var email = this.get( 'email' );
    if ( !trim( this.get( 'text' ) ).length ) {
      errors.text = "Note is required.";
    }
    if ( !trim( email ).length || email.indexOf('@') === -1 ) {
      errors.email = "Email must be valid.";
    }
    if ( !trim( this.get( 'name' ) ).length ) {
      errors.name = "Name is required.";
    }

    return _.isEmpty( errors ) ? false : errors;
  }

} );
